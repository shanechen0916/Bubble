window.__require=function t(e,n,o){function i(r,c){if(!n[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){return i(e[r][1][t]||t)},u,u.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({AcrossTips:[function(t,e,n){"use strict";cc._RF.push(e,"4eddb8V0kVLILjTcqkZqUSx","AcrossTips"),n.__esModule=!0,n.AcrossTips=void 0;var o=cc.Class({extends:cc.Component,statics:{getInstance:function(){return cc.find("Canvas/AcrossTips").getComponent("AcrossTips")}},properties:{tipsPrefab:cc.Prefab},onLoad:function(){this.tipsList=[]},showTips:function(t){var e=this.tipsList.find(function(t){return!1===t.active});void 0===e&&(e=cc.instantiate(this.tipsPrefab),this.tipsList.push(e),this.node.addChild(e)),e.opacity=0,e.x=0,e.y=.5*cc.winSize.height-240,e.active=!0,e.runAction(cc.sequence(cc.spawn(cc.moveBy(.3,cc.v2(0,50)),cc.fadeTo(.4,255)).easing(cc.easeOut(2)),cc.delayTime(1),cc.callFunc(function(){e.active=!1}))),e.getChildByName("text").getComponent(cc.Label).string=t}});n.AcrossTips=o,cc._RF.pop()},{}],DialogBase:[function(t,e,n){"use strict";cc._RF.push(e,"4ccc82N/vxI44TzJSUG8aeO","DialogBase"),n.__esModule=!0,n.DialogBase=void 0;var o=t("OrderManager"),i=cc.Class({extends:cc.Component,properties:{autoMask:!0,hideGaming:!1,canShowInTop:!1},ctor:function(){this.__autoMaskInited=!1,this.__onHideCallList=[]},show:function(){this.node&&(this.node.active||(this.hideGaming&&o.OrderManager.hideGaming(),this.node.active=!0,this._checkAddMask(),this.onShow.apply(this,arguments)))},hide:function(){this.node&&this.node.active&&(this.hideGaming&&o.OrderManager.showGaming(),this.node.active=!1,this.onHide(),this.__onHideCallList.forEach(function(t){return t&&t()}))},onShow:function(){},onHide:function(){},isShowing:function(){return this.node&&this.node.active},setOnHide:function(t){this.canShowInTop||this.__onHideCallList.push(t)},showPopAction:function(t){void 0===t&&(t={})},_checkAddMask:function(){this.__autoMaskInited||(this.__autoMaskInited=!0,this.autoMask&&this._addMaskLayer())},_addMaskLayer:function(){var t=this;cc.loader.loadRes("prefab/AutoMask",function(e,n){n&&t.node.insertChild(cc.instantiate(n),0)})}});n.DialogBase=i,cc._RF.pop()},{OrderManager:"OrderManager"}],DialogManager:[function(t,e,n){"use strict";cc._RF.push(e,"aef02bhk9BP4KxHMmn6qE8s","DialogManager"),n.__esModule=!0,n.DialogManager=void 0;var o=cc.Class({extends:cc.Component,statics:{getInstance:function(){return cc.find("Canvas/DialogManager").getComponent("DialogManager")}},properties:{dialogs:[cc.Prefab]},ctor:function(){this._dialogsMap=new Map,this._isShowing=!1,this._showList=[],this._currentDialog=null},onLoad:function(){var t=this;this.dialogs.forEach(function(e){if(e){var n=cc.instantiate(e);n.active=!1,n.parent=t.node;var o=n.getComponent(e.name);o?(o.setOnHide(function(){if(t._showList.length>0){var e=t._showList.shift(),n=e.name,o=e.args;t._doShow.apply(t,[n].concat(o))}else t._isShowing=!1,t._currentDialog=null}),t._dialogsMap.set(e.name,n)):cc.error(">> %s.js \u4e0d\u5b58\u5728\uff01",e.name)}})},isShowing:function(){return this._isShowing},show:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this._isShowing?this._showList.push({name:t,args:n}):this._doShow.apply(this,[t].concat(n))},clearshow:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this._isShowing?(this._showList=[],this._showList.push({name:t,args:n}),this._currentDialog&&this._currentDialog.hide()):this._doShow.apply(this,[t].concat(n))},insertshow:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this._isShowing?this._showList.splice(0,0,{name:t,args:n}):this._doShow.apply(this,[t].concat(n))},showInTop:function(t){var e=this._dialogsMap.get(t)&&this._dialogsMap.get(t).getComponent(t);if(e){e.node.zIndex=99;for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];e.show.apply(e,o)}else cc.error(">> %s \u672a\u6ce8\u518c\uff01 \u6216 %s.js \u4e0d\u5b58\u5728\uff01",t,t)},_doShow:function(t){this._isShowing=!0;var e=this._dialogsMap.get(t)&&this._dialogsMap.get(t).getComponent(t);if(e){this._currentDialog=e;for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];e.show.apply(e,o)}else cc.error(">> %s \u672a\u6ce8\u518c\uff01 \u6216 %s.js \u4e0d\u5b58\u5728\uff01",t,t)}});n.DialogManager=o,cc._RF.pop()},{}],ISingleton:[function(t,e,n){"use strict";cc._RF.push(e,"404c2/hnA9D1IOjCqHIpG97","ISingleton"),n.__esModule=!0,n.ISingleton=void 0;var o=new WeakMap,i=new WeakMap,a=function(){function t(){if((this instanceof t?this.constructor:void 0)===t)throw new Error("Cannot instantiate the type ISingleton!");if(!o.get(this.constructor))throw new Error("Cannot instantiate the type "+this.constructor.name+"! Please use ${this.constructor.name}.getInstance().")}return t.getInstance=function(){return i.get(this)||(o.set(this,!0),i.set(this,new this),o.set(this,!1)),i.get(this)},t}();n.ISingleton=a,cc._RF.pop()},{}],OrderManager:[function(t,e,n){"use strict";var o,i,a,r,c;cc._RF.push(e,"d6321Q6BxNMcLoCVHbggs9Z","OrderManager"),n.__esModule=!0,n.OrderManager=void 0;var s={init:function(){o||(o=cc.find("Canvas/gaming")),i||(i=cc.find("Canvas/rest")),a||(a=cc.find("Canvas/index")),r||(r=cc.find("Canvas/maskLayer")),c||(c=cc.find("Canvas/bg/bg3/starLayer"))},showGaming:function(){this.init(),o.opacity=255,i.opacity=255,a.opacity=255,r.active=!1,c.active=!0},hideGaming:function(){this.init(),o.opacity=0,i.opacity=0,a.opacity=0,r.active=!0,c.active=!1}};n.OrderManager=s,cc._RF.pop()},{}],SFXStars:[function(t,e,n){"use strict";cc._RF.push(e,"160f2CYCkJP673K7wQP+t89","SFXStars"),n.__esModule=!0,n.SFXStars=void 0;var o=cc.Class({name:"SFXStars.ScaleRange",properties:{min:{default:.5,type:cc.Float,range:[.01,void 0,.01],tooltip:"\u661f\u661f\u8282\u70b9\u7f29\u653e\u8303\u56f4\u8d77\u59cb\u503c"},max:{default:1,type:cc.Float,range:[.01,void 0,.01],tooltip:"\u661f\u661f\u8282\u70b9\u7f29\u653e\u8303\u56f4\u7ec8\u6b62\u503c"}},setScaleOf:function(t){!t||1===this.min&&1===this.max||(t.scale=this.min+(this.max-this.min)*Math.random())}}),i=cc.Class({name:"SFXStars.FadeRange",properties:{min:{default:10,type:cc.Float,range:[0,255,1],tooltip:"\u661f\u661ffadeTo\u8d77\u59cb\u503c"},max:{default:155,type:cc.Float,range:[0,255,1],tooltip:"\u661f\u661ffadeTo\u7ec8\u6b62\u503c"},time2min:{default:1,type:cc.Float,range:[.01,void 0,.01],tooltip:"\u661f\u661ffadeTo min\u65f6\u95f4"},time2minDelay:{default:2,type:cc.Float,range:[.01,void 0,.01],tooltip:"\u661f\u661ffadeTo min\u65f6\u95f4"},time2max:{default:1,type:cc.Float,range:[.01,void 0,.01],tooltip:"\u661f\u661ffadeTo max\u65f6\u95f4"},time2maxDelay:{default:.5,type:cc.Float,range:[.01,void 0,.01],tooltip:"\u661f\u661ffadeTo max\u65f6\u95f4"}},setFadeOf:function(t,e){if(void 0===e&&(e=.01),t&&(255!==this.min||255!==this.max)){t.x=-1e4,t.y=-1e4,t.opacity=this.min;var n=t.scale;t.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(function(){t.x=t.parent.width*(Math.random()-t.parent.anchorX),t.y=t.parent.height*(Math.random()-t.parent.anchorY),t.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.scaleTo(this.time2max,n),cc.fadeTo(this.time2max,this.max)),cc.delayTime(this.time2maxDelay),cc.spawn(cc.scaleTo(this.time2min,0),cc.fadeTo(this.time2min,this.min)),cc.delayTime(this.time2minDelay),cc.callFunc(function(){t.x=t.parent.width*(Math.random()-t.parent.anchorX),t.y=t.parent.height*(Math.random()-t.parent.anchorY)},this))))},this)))}}}),a=cc.Class({extends:cc.Component,properties:{randomPos:{default:!0,tooltip:"\u662f\u5426\u968f\u673a\u4f4d\u7f6e"},scaleRange:{type:o,default:null,tooltip:"\u662f\u5426\u968f\u673a\u5927\u5c0f\uff1a\u5f53 min === max === 1 \u6216 scaleRange === null \u65f6\uff0c\u968f\u673a\u751f\u6548\uff0c\u4f7f\u7528 stars \u539f\u59cb\u7f29\u653e\u503c\u3002"},fadeRange:{type:i,default:null,tooltip:"\u662f\u5426\u4f7f\u7528fadeTo\u6548\u679c\uff1amin === max === 255 \u6216 fadeRange === null \u65f6\uff0c\u4e0d\u4f7f\u7528fadeTo\u6548\u679c\u3002"}},onLoad:function(){var t=this;this.stars=[],this.node.children.forEach(function(e){return t.stars.push(e)})},reset:function(){var t=this;this.stars.forEach(function(t){return t&&t.stopAllActions()});var e=0;this.stars.forEach(function(n){t.randomPos&&n&&(n.x=t.node.width*(Math.random()-t.node.anchorX),n.y=t.node.height*(Math.random()-t.node.anchorY)),t.scaleRange&&t.scaleRange.setScaleOf(n),t.fadeRange&&(t.fadeRange.setFadeOf(n,e),e+=(t.fadeRange.time2min+t.fadeRange.time2minDelay+t.fadeRange.time2max+t.fadeRange.time2maxDelay)/3+Math.random())})},onEnable:function(){this.reset()},onDisable:function(){this.stars.forEach(function(t){return t&&t.stopAllActions()})}});n.SFXStars=a,cc._RF.pop()},{}],ajax:[function(t,e){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}cc._RF.push(e,"39bff1fy5pDcJ7PyZR2MfJj","ajax");var o=function(t){if(!t)return"";var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},i=function(t){var e=t,n=e.type.toLocaleUpperCase(),i="POST"===n,a=!1,r=e.timeout||8e3,c=e.withCredentials,s=new XMLHttpRequest,l=o(e.data),u=e.url;!i&&(u+=(u.indexOf("?")>-1?"&":"?")+l),s.open(n,u,!0);var h=t.headers;if(h)for(var d in h)s.setRequestHeader(d,h[d]);c&&(s.withCredentials=!0),e.dataType&&(s.dataType=e.dataType),i&&s.setRequestHeader("Content-Type","application/json");var p=0;return s.onreadystatechange=function(){if(4==s.readyState){var t=s.status;if(t>=200&&t<300||304==t){var n=s.responseText,o=null;try{o=JSON.parse(n)}catch(i){throw i}e.success&&e.success(o,s)}else e.error&&e.error(s,s.status?"error":"abort",e.url);a=!0,p&&clearTimeout(p)}},s.send(i?l:null),r&&(p=setTimeout(function(){a||(s.onreadystatechange=function(){},s.abort(),e.error&&e.error(s,"timeout",e.url))},r)),s};e.exports={get:function(t,e,o){return new Promise(function(a,r){return i(n({},o,{type:"GET",url:t,data:e,success:a,error:r}))})},post:function(t,e,o){return new Promise(function(a,r){return i(n({},o,{type:"POST",url:t,data:e,success:a,error:r}))})}},cc._RF.pop()},{}],api:[function(t,e){"use strict";cc._RF.push(e,"a88f6gyGJZMlK1dyWF6uKZ9","api");var n,o="",i="https://api.bit123.finance";e.exports={bindWallet:function(t){return console.log(">>>>>tgInitData",window.Telegram.WebApp.initData),window.Telegram.WebApp.initData?fetch(i+"/user/bind",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initData:window.Telegram.WebApp.initData,wallet:t})}).then(function(t){return t.json()}).then(function(t){if(0!==t.code)throw new Error(t.msg);return t.data}):Promise.resolve()},getUserInfo:function(){return console.log(">>>>>tgInitData",window.Telegram.WebApp.initData),window.Telegram.WebApp.initData?fetch(i+"/user/info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initData:window.Telegram.WebApp.initData})}).then(function(t){return t.json()}).then(function(t){if(0!==t.code)throw new Error(t.msg);return o=t.data.token,t.data}):Promise.resolve()},updateScore:function(t){return console.log(">>>>>tgInitData",window.Telegram.WebApp.initData),window.Telegram.WebApp.initData?fetch(i+"/score/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initData:window.Telegram.WebApp.initData,score:t,token:o})}).then(function(t){return t.json()}).then(function(t){if(0!==t.code)throw new Error(t.msg);return o=t.data.token,t.data}):Promise.resolve()},scoreQueneRunner:(n=[],function(t){return n.length>1?n.splice(1,n.length-1,t):n.push(t),1===n.length?function t(){var e=n[0];return e?e().finally(function(){if(n.shift(),console.log("next task",n),n.length)return t()}):Promise.resolve()}():Promise.resolve()})},cc._RF.pop()},{}],baseDialog:[function(t,e){"use strict";var n,o;cc._RF.push(e,"649c7ZjUOZFYrLs16blaOC2","baseDialog"),cc.Class({extends:cc.Component,show:function(t){n&&o||(n=cc.find("Canvas/modal"),o=n.getComponent("modal")),n.on("close",this.close,this),o.show(t)}}),cc._RF.pop()},{}],bg:[function(t,e){"use strict";cc._RF.push(e,"bcc66mc7bdPx6Z8E+uHnJ0r","bg"),t("store").global,cc.Class({extends:cc.Component,properties:{bg1:cc.Node,bg2:cc.Node,bg3:cc.Node,bg3_1:cc.Node,bg3_2:cc.Node,starLayer:cc.Node,bg3SpriteFrame:[cc.SpriteFrame]},onLoad:function(){this.rotationVal=0,this.timer=0,this.isChanging=!1;var t=cc.view.getDesignResolutionSize(),e=cc.view.getFrameSize();e.height/e.width>t.height/t.width&&(this.starLayer.height=this.starLayer.height/t.height*(e.height/e.width)*t.width)},rotateBg:function(){this.bg1.angle=this.rotationVal,this.bg2.angle=this.rotationVal,this.rotationVal++,this.rotationVal%=360},update:function(t){if(this.timer>.2)return this.timer=0,void this.rotateBg();this.timer+=t}}),cc._RF.pop()},{store:"store"}],bubbles:[function(t,e){"use strict";cc._RF.push(e,"ddad6tqvgNHeaqJwqcUY7iA","bubbles"),cc.Class({extends:cc.Component,properties:{bubble:{default:null,type:cc.Node},adBubble:{default:null,type:cc.Node}},getBlock:function(){return cc.instantiate(this.bubble)}}),cc._RF.pop()},{}],bubble:[function(t,e){"use strict";cc._RF.push(e,"f8bafM3MYhCWrReyJY1/DDH","bubble");var n=t("store").global,o=t("explodes"),i=new cc.Event.EventCustom("peng",!0),a=Date.now();cc.Class({extends:cc.Component,properties:{explodes:{default:null,type:o},gift:{default:null,type:cc.Node},giftSpriteFrames:[cc.SpriteFrame],bubbleSpr:cc.Node,bubbleSpriteFrames:[cc.SpriteFrame]},onLoad:function(){this.isColor=!1;var t=this.node.getComponent(cc.RigidBody),e=this.node.getComponent(cc.PhysicsCircleCollider).radius=60+60*Math.random(),n=this.node.width;this.curScale=2*e/n,this.node.width=this.node.height=2*e,this.bubbleSpr.width=this.bubbleSpr.height=this.node.width,t.linearVelocity=cc.v2(100*Math.random()-50,100*Math.random()-50),this.node.on(cc.Node.EventType.TOUCH_START,function(){Date.now()-a>100&&(a=Date.now(),this.onPeng({x:this.node.x,y:this.node.y}),this.node.dispatchEvent(i))},this),this.showStatus()},showStatus:function(){if(n.colorBubbleCntArr_id.length>0){var t=n.colorBubbleCntArr_id[0];n.colorBubbleCntArr_cnt[0]--,n.colorBubbleCntArr_cnt[0]<=0&&(n.colorBubbleCntArr_id.splice(0,1),n.colorBubbleCntArr_cnt.splice(0,1)),t>=3&&t<=5&&(this.isColor=!0),(t<1||t>this.bubbleSpriteFrames.length)&&(t=this.bubbleSpriteFrames.length),2===t&&(this.bubbleSpr.opacity=30.6),this.bubbleSpr.getComponent(cc.Sprite).spriteFrame=this.bubbleSpriteFrames[t-1]}},onPeng:function(t){this.isColor&&n.colorBubbleScore++,this.explodes.emit(t,this.curScale),this.gift.active?this.explodes.emitAd(t,this.curScale):this.isColor?this.explodes.emitColor(t,this.curScale):this.explodes.emit(t,this.curScale),this.node.destroy()},onBeginContact:function(){},update:function(){}}),cc._RF.pop()},{explodes:"explodes",store:"store"}],config:[function(t,e,n){"use strict";cc._RF.push(e,"2a3b3JkILtFja0oZ4PHD6Tx","config"),n.__esModule=!0,n.config=void 0;var o={};n.config=o,o.VERSION_STRING="1.0.0",cc._RF.pop()},{}],countUpLabel:[function(t,e){"use strict";cc._RF.push(e,"4ac27U9Wf1JSLrJ5lpyKibc","countUpLabel");var n=function(t,e,n,o,i,a){var r=this;if(r.version=function(){return"1.9.3"},r.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:function(t,e,n,o){return n*(1-Math.pow(2,-10*t/o))*1024/1023+e},formattingFn:function(t){var e,n,o,i,a,c,s=t<0;if(t=Math.abs(t).toFixed(r.decimals),n=(e=(t+="").split("."))[0],o=e.length>1?r.options.decimal+e[1]:"",r.options.useGrouping){for(i="",a=0,c=n.length;a<c;++a)0!==a&&a%3==0&&(i=r.options.separator+i),i=n[c-a-1]+i;n=i}return r.options.numerals.length&&(n=n.replace(/[0-9]/g,function(t){return r.options.numerals[+t]}),o=o.replace(/[0-9]/g,function(t){return r.options.numerals[+t]})),(s?"-":"")+r.options.prefix+n+o+r.options.suffix},prefix:"",suffix:"",numerals:[]},a&&"object"==typeof a)for(var c in r.options)a.hasOwnProperty(c)&&null!==a[c]&&(r.options[c]=a[c]);""===r.options.separator?r.options.useGrouping=!1:r.options.separator=""+r.options.separator;for(var s=0,l=["webkit","moz","ms","o"],u=0;u<l.length&&!window.requestAnimationFrame;++u)window.requestAnimationFrame=window[l[u]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l[u]+"CancelAnimationFrame"]||window[l[u]+"CancelRequestAnimationFrame"];function h(t){return"number"==typeof t&&!isNaN(t)}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-s)),o=window.setTimeout(function(){t(e+n)},n);return s=e+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),r.initialize=function(){return!(!r.initialized&&(r.error="",r.target=t,r.target?(r.startVal=Number(e),r.endVal=Number(n),h(r.startVal)&&h(r.endVal)?(r.decimals=Math.max(0,o||0),r.dec=Math.pow(10,r.decimals),r.duration=1e3*Number(i)||2e3,r.countDown=r.startVal>r.endVal,r.frameVal=r.startVal,r.initialized=!0,0):(r.error="[CountUp] startVal ("+e+") or endVal ("+n+") is not a number",1)):(r.error="[CountUp] target is null or undefined",1)))},r.printValue=function(t){var e=r.options.formattingFn(t);this.target.string=e,this.target.getComponent("countUpLabel").setString(e),this.target._forceUpdateRenderData},r.count=function(t){r.startTime||(r.startTime=t),r.timestamp=t;var e=t-r.startTime;r.remaining=r.duration-e,r.options.useEasing?r.countDown?r.frameVal=r.startVal-r.options.easingFn(e,0,r.startVal-r.endVal,r.duration):r.frameVal=r.options.easingFn(e,r.startVal,r.endVal-r.startVal,r.duration):r.countDown?r.frameVal=r.startVal-(r.startVal-r.endVal)*(e/r.duration):r.frameVal=r.startVal+(r.endVal-r.startVal)*(e/r.duration),r.countDown?r.frameVal=r.frameVal<r.endVal?r.endVal:r.frameVal:r.frameVal=r.frameVal>r.endVal?r.endVal:r.frameVal,r.frameVal=Math.round(r.frameVal*r.dec)/r.dec,r.printValue(r.frameVal),e<r.duration?r.rAF=requestAnimationFrame(r.count):r.callback&&r.callback()},r.start=function(t){r.initialize()&&(r.callback=t,r.rAF=requestAnimationFrame(r.count))},r.stop=function(){r.paused||(r.paused=!0,cancelAnimationFrame(r.rAF))},r.pauseResume=function(){r.paused?(r.paused=!1,delete r.startTime,r.duration=r.remaining,r.startVal=r.frameVal,requestAnimationFrame(r.count)):(r.paused=!0,cancelAnimationFrame(r.rAF))},r.reset=function(){r.paused=!1,delete r.startTime,r.initialized=!1,r.initialize()&&(cancelAnimationFrame(r.rAF),r.printValue(r.startVal))},r.update=function(t){r.initialize()&&(h(t=Number(t))?(r.error="",t!==r.frameVal&&(cancelAnimationFrame(r.rAF),r.paused=!1,delete r.startTime,r.startVal=r.frameVal,r.endVal=t,r.countDown=r.startVal>r.endVal,r.rAF=requestAnimationFrame(r.count))):r.error="[CountUp] update() - new endVal is not a number: "+t)},r.initialize()&&r.printValue(r.startVal)};cc.Class({extends:cc.Label,editor:!1,properties:{_change:null,_first:!0},onDestroy:function(){this._change&&this._change.stop(),this.node.stopAllActions()},setString:function(t){if(t==this.string)return this.string=t,void(this._first=!1);this._change&&this._change.stop(),this.node.stopAllActions(),this._first||!this.node.activeInHierarchy?(this.string=t,this._first=!1):(this._change=new n(this,parseInt(this.string),parseInt(t),0,2,{useEasing:!0,useGrouping:!0,separator:"",decimal:"."}),this._change.start())}}),cc._RF.pop()},{}],debounce:[function(t,e){"use strict";cc._RF.push(e,"3426bYkIKhDWq05oqiUsJFq","debounce"),e.exports=function(t,e){var n,o,i,a,r=[];return function(){i=this,a=arguments,o||(o=setTimeout(function(){clearTimeout(n),n=setTimeout(function(){for(var e=0,n=a.length;e<n;e++)r.push(a[e]);t.apply(i,r),r=[]},e),o=null},32))}},cc._RF.pop()},{}],dialogFaq:[function(t,e){"use strict";cc._RF.push(e,"fa2c0QSWoVBgIEaFMrTL+of","dialogFaq");var n=t("DialogBase");cc.Class({extends:n.DialogBase,properties:{closeBtn:{default:null,type:cc.Node}},onLoad:function(){this.closeBtn.on("click",this.onCloseBtn,this)},onCloseBtn:function(){this.hide()}}),cc._RF.pop()},{DialogBase:"DialogBase"}],dialogGroup:[function(t,e){"use strict";cc._RF.push(e,"4e985Qys8FEc589uFVEaqHC","dialogGroup");var n=t("DialogBase"),o=t("../../module/api");function i(){i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(T){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),r=new F(o||[]);return a._invoke=function(t,e,n){var o="suspendedStart";return function(i,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var r=n.delegate;if(r){var c=x(r,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=u(t,e,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}(t,n,r),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(T){return{type:"throw",arg:T}}}t.wrap=l;var h={};function d(){}function p(){}function f(){}var g={};s(g,a,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(R([])));b&&b!==e&&n.call(b,a)&&(g=b);var y=f.prototype=d.prototype=Object.create(g);function v(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){function o(i,a,r,c){var s=u(t[i],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){o("next",t,r,c)},function(t){o("throw",t,r,c)}):e.resolve(h).then(function(t){l.value=t,r(l)},function(t){return o("throw",t,r,c)})}c(s.arg)}var i;this._invoke=function(t,n){function a(){return new e(function(e,i){o(t,n,e,i)})}return i=i?i.then(a,a):a()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function R(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(w.prototype),s(w.prototype,r,function(){return this}),t.AsyncIterator=w,t.async=function(e,n,o,i,a){void 0===a&&(a=Promise);var r=new w(l(e,n,o,i),a);return t.isGeneratorFunction(n)?r:r.next().then(function(t){return t.done?t.value:r.next()})},v(y),s(y,c,"Generator"),s(y,a,function(){return this}),s(y,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=R,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return r.type="throw",r.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],r=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var i=o.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:R(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function a(t,e,n,o,i,a,r){try{var c=t[a](r),s=c.value}catch(l){return void n(l)}c.done?e(s):Promise.resolve(s).then(o,i)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var r=t.apply(e,n);function c(t){a(r,o,i,c,s,"next",t)}function s(t){a(r,o,i,c,s,"throw",t)}c(void 0)})}}var c=t("store").global;cc.Class({extends:n.DialogBase,properties:{myCreatedName:{default:null,type:cc.Label},myChangeBtn:{default:null,type:cc.Node},myChangeBtnTxt:{default:null,type:cc.Label},createdNode:{default:null,type:cc.Node},username:{default:null,type:cc.Label},nickname:{default:null,type:cc.Label},score:{default:null,type:cc.Label},closeBtn:{default:null,type:cc.Node},changeBtn:{default:null,type:cc.Node}},setWalletInfo:function(t){var e=this;return r(i().mark(function n(){var a,r;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:void 0===t&&(t=!1),a=new TonWeb.utils.Address(tonConnectUI.account.address),r=a.toString({isUserFriendly:!0,isBounceable:!1}),e.myCreatedName.string=r,e.myChangeBtnTxt.string="connected",e.myChangeBtnTxt.node.color=cc.color(0,255,0),e.myChangeBtn.getComponent(cc.Button).interactable=!1,t&&(0,o.bindWallet)(r).catch(console.error);case 8:case"end":return n.stop()}},n)}))()},onLoad:function(){this.closeBtn.on("click",this.onCloseBtn,this),this.myChangeBtn.on("click",r(i().mark(function t(){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tonConnectUI.connectWallet();case 2:this.setWalletInfo(!0);case 3:case"end":return t.stop()}},t,this)})),this),c.username&&(this.username.string=c.username),c.nickname&&(this.nickname.string=c.nickname.slice(0,3)),c.totalScore&&(this.score.string=c.totalScore);var t=c.wallet;(t||tonConnectUI.connected)&&this.setWalletInfo(!t&&tonConnectUI.connected)},onEnable:function(){c.totalScore&&(this.score.string=c.totalScore)},onCloseBtn:function(){this.hide()},onShow:function(){c.username&&(this.username.string=c.username),c.nickname&&(this.nickname.string=c.nickname.slice(0,3)),c.totalScore&&(this.score.string=c.totalScore)}}),cc._RF.pop()},{"../../module/api":"api",DialogBase:"DialogBase",store:"store"}],dialogRank:[function(t,e){"use strict";cc._RF.push(e,"bf4c77XpTlCfZY7FPl/FO44","dialogRank"),t("tool");var n=t("DialogBase");t("DialogManager"),t("store").global,cc.Class({extends:n.DialogBase,properties:{rankCell:cc.Prefab,topCell:{default:null,type:cc.Node},groupContent:{default:null,type:cc.Node},groupsRank:{default:null,type:cc.Node},globalRank:{default:null,type:cc.Node},friendsRank:{default:null,type:cc.Node},crown:[cc.SpriteFrame],tabNode:cc.Node,tabBtns:[cc.Node],tabTexts:[cc.Node],closeBtn:{default:null,type:cc.Node},allGroupNames:[cc.Label],allScores:[cc.Label],allRankNums:[cc.Label]},onLoad:function(){var t=this;this.closeBtn.on("click",function(){t.hide()});for(var e=function(e){t.tabBtns[e]&&t.tabBtns[e].on("click",function(){this.onTabMenuSwitch(e)},t)},n=0,o=this.tabBtns.length;n<o;n++)e(n);this.onTabMenuSwitch(0)},onTabMenuSwitch:function(t){if(this.curRankType!==t){this.curRankType=t;for(var e=0,n=this.tabTexts.length;e<n;e++){var o=this.tabTexts[e];o&&(o.color=e===t?new cc.Color(31,42,173):new cc.Color(255,255,255))}this.tabNode.x=167*(t-1),this.groupsRank.x=0===t?0:-9999,this.globalRank.x=1===t?0:-9999,this.friendsRank.x=2===t?0:-9999}}}),cc._RF.pop()},{DialogBase:"DialogBase",DialogManager:"DialogManager",store:"store",tool:"tool"}],dialogTips:[function(t,e){"use strict";cc._RF.push(e,"18cb1xMJq1I0o419hWRl20s","dialogTips");var n=t("DialogBase");t("store"),cc.Class({extends:n.DialogBase,properties:{title:cc.Label,content:cc.RichText,btnTxt:cc.Label,btn:cc.Node},onLoad:function(){var t=this;this.btn.on("click",function(){t.hide()})},onShow:function(t){t.title&&(this.title.string=t.title),t.content&&(this.content.string=t.content),t.btnTxt&&(this.btnTxt.string=t.btnTxt)}}),cc._RF.pop()},{DialogBase:"DialogBase",store:"store"}],explodes:[function(t,e){"use strict";cc._RF.push(e,"f7a14ausR1FQIzNwqaZhYhN","explodes");var n=[],o=0,i=[],a=0,r=[],c=0;cc.Class({extends:cc.Component,properties:{stage:{default:null,type:cc.Node},normal:{default:null,type:cc.Prefab},adExplode:{default:null,type:cc.Prefab},colorExplode:{default:null,type:cc.Prefab}},onLoad:function(){for(var t=0;t<10;t++){var e=cc.instantiate(this.normal);e.x=2e3,e.y=2e3,n.push(e),this.stage.addChild(e)}for(var o=0;o<2;o++){var a=cc.instantiate(this.adExplode);a.x=2e3,a.y=2e3,i.push(a),this.stage.addChild(a)}for(var c=0;c<10;c++){var s=cc.instantiate(this.colorExplode);s.x=2e3,s.y=2e3,r.push(s),this.stage.addChild(s)}},emit:function(t,e){10===o&&(o=0),this.showExplode(n[o],t,e),o++},emitAd:function(t,e){2===a&&(a=0),this.showExplode(i[a],t,e),a++},emitColor:function(t,e){10===c&&(c=0),this.showExplode(r[c],t,e),c++},showExplode:function(t,e,n){t.x=e.x,t.y=e.y,t.scaleX=t.scaleY=n,t.getComponent("explode").emit()}}),cc._RF.pop()},{}],explode:[function(t,e){"use strict";cc._RF.push(e,"542c2vPTDNC7q/oErj8DfoE","explode"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.particle=this.node.getComponent(cc.ParticleSystem)},emit:function(){this.particle.resetSystem()},hide:function(){this.particle.stopSystem()}}),cc._RF.pop()},{}],gaming:[function(t,e){"use strict";cc._RF.push(e,"f34ea8+v8xH2JL1Q3J62iQt","gaming");var n=t("store"),o=n.global,i=t("bubbles");cc.Class({extends:cc.Component,properties:{score:{default:null,type:cc.Label},bubbles:{default:null,type:i},scoreNode:{default:null,type:cc.Node},fadeRankNode:{default:null,type:cc.Node},topName:{default:null,type:cc.Label}},onLoad:function(){var t=this;o.bubbleCntForRest=0,cc.director.getPhysicsManager().enabled=!0,this.node.on("peng",this.onPeng,this),n.ready().finally(function(){t.score.string=n.global.score,t.topName.string=(o.nickname||"").slice(0,3)}),this.showBubbles(!1),this.rest=cc.find("Canvas/rest").getComponent("rest")},onEnable:function(){},onPeng:function(){var t=this;n.global.score++,n.global.totalScore++,this.score.string=n.global.score,n.save(),o.bubbleCntForRest<o.dstBubbleCntForRest-12&&(o.bubbleCntForAward++,this.showBubble(!0)),o.bubbleCntForRest++,o.bubbleCntForRest>=o.dstBubbleCntForRest&&setTimeout(function(){t.rest.show()},2e3)},showBubbles:function(t){for(var e=0;e<12;e++)this.showBubble(t)},showBubble:function(t){var e=this.bubbles.getBlock();e.x=this.node.width*Math.random();var n=this.scoreNode.parent.convertToWorldSpaceAR(cc.v2(this.scoreNode.x,this.scoreNode.y)).y,o=this.fadeRankNode.parent.convertToNodeSpaceAR(cc.v2(this.fadeRankNode.x,this.fadeRankNode.y)).y;if(e.y=(n-o)*Math.random()+o,t){e.scaleX=e.scaleY=.01;var i=cc.sequence(cc.scaleTo(.4,1.1,1.1),cc.scaleTo(.2,1,1),cc.scaleTo(.05,1.01,1.01),cc.scaleTo(.05,1,1));e.runAction(i)}this.node.addChild(e)}}),cc._RF.pop()},{bubbles:"bubbles",store:"store"}],globalCell:[function(t,e){"use strict";cc._RF.push(e,"bc1da9nDYVKyK+yWDB1YYDA","globalCell"),t("tool"),t("store"),cc.Class({extends:cc.Component,properties:{crown:[cc.SpriteFrame],headIcon:cc.Sprite,rankTxt:cc.Label,rankIma:cc.Sprite,memberName:cc.Label,score:cc.Label},onLoad:function(){},init:function(t,e){this.rankIma.node.active=e<3,e<3&&(this.rankIma.spriteFrame=this.crown[e])}}),cc._RF.pop()},{store:"store",tool:"tool"}],globalData:[function(t,e){"use strict";cc._RF.push(e,"be94bbRsfBCRor42Hb2lPD3","globalData"),e.exports={uid:0,username:"",nickname:"xin12312",score:0,totalScore:0,wallet:"",remainTimeToNextDay:86400,colorBubbleScore:0,bubbleCntForAward:0,bubbleCntForRest:0,dstBubbleCntForRest:1e3,colorBubbleCntArr:[],colorBubbleCntArr_id:[],colorBubbleCntArr_cnt:[]},cc._RF.pop()},{}],globalRank:[function(t,e){"use strict";cc._RF.push(e,"87f15xUlC1NlIbfFvqtmz+C","globalRank");var n=t("tool"),o=t("store").global;cc.Class({extends:cc.Component,properties:{globalCell:cc.Prefab,globalContent:cc.Node,globalView:cc.Node,crown:[cc.SpriteFrame],myGlobalRankIma:cc.Sprite,myGlobalRank:cc.Label,myNickName:cc.Label,myGlobalScore:cc.Label,headIcon:cc.Sprite,bottomTips:cc.Node,allNickName:[cc.Label],allScores:[cc.Label],allRankNums:[cc.Label]},onLoad:function(){this.globalCellList=[]},init:function(){this.node.x=-9999},showInfo:function(t){this.node.x=0,this.myGlobalScore.string="0",this.myGlobalRank.string="\u672a\u4e0a\u699c",this.myGlobalRankIma.node.active=!1,this.myNickName.string=n.tool.trimString(o.nickname,8),this.globalCellList.map(function(t){return t.x=-9999});var e=t.globalUsers.length;if(0!==e){for(var i=-1,a=0,r=["","",""],c=["","",""],s=["","",""],l=0;l<e&&l<50;l++){var u=null;if(void 0===this.globalCellList[l]){if(u=cc.instantiate(this.globalCell),this.globalCellList.push(u),u.parent=this.globalContent,u.x=0,u.y=-(l+.5)*u.height,0===l){var h=u.getChildByName("line");h&&(h.active=!1)}}else u=this.globalCellList[l];u.x=0,a+=u.height,u.getComponent("globalCell").init(t.globalUsers[l],l),t.user.length>0&&t.globalUsers[l]._id===t.user[0]._id&&(i=l+1);var d="\n\n\n\n";15!==l&&31!==l&&49!==l||(d="\n\n\n");var p,f=n.tool.trimString(t.globalUsers[l].nickname,8)+d,g=n.tool.formatNum(0)+d,m=l+1+d;r[p=l<16?0:l>=16&&l<32?1:2]+=f,c[p]+=g,s[p]+=m}for(var b=0;b<=2;b++)this.allNickName[b].string=r[b],this.allScores[b].string=c[b],this.allRankNums[b].string=s[b];this.globalContent.height=a,this.myGlobalRankIma.node.active=i>=1&&i<=3,this.myGlobalRank.node.active=!this.myGlobalRankIma.node.active,-1===i?(this.myGlobalRank.string="\u672a\u4e0a\u699c",this.myGlobalRank.fontSize=44,this.myGlobalRank.lineHeight=50,this.myGlobalRank.node.x=-238):i>=1&&i<=3?this.myGlobalRankIma.spriteFrame=this.crown[i-1]:(this.myGlobalRank.string=i,this.myGlobalRank.fontSize=62,this.myGlobalRank.lineHeight=70,this.myGlobalRank.node.x=-231)}}}),cc._RF.pop()},{store:"store",tool:"tool"}],index:[function(t,e){"use strict";cc._RF.push(e,"be197V9FYBCiYtWH+7C3xS9","index");var n=t("DialogManager");t("store").global,cc.Class({extends:cc.Component,properties:{rankBtn:{default:null,type:cc.Node}},onLoad:function(){this.rankBtn.on("click",function(){n.DialogManager.getInstance().show("dialogRank")})}}),cc._RF.pop()},{DialogManager:"DialogManager",store:"store"}],modal:[function(t,e){"use strict";cc._RF.push(e,"325daFdYNZE4qge3snRTbPT","modal"),cc.Class({extends:cc.Component,properties:{close:{default:null,type:cc.Node},title:{default:null,type:cc.Label},gaming:{default:null,type:cc.Node},index:{default:null,type:cc.Node}},show:function(t){this.node.active=!0,this.title.string=t||""},onClose:function(){this.node.active=!1,this.node.emit("close")}}),cc._RF.pop()},{}],observer:[function(t,e){"use strict";cc._RF.push(e,"b0b84cIkgVGjo36PlbdD4CK","observer"),e.exports={watch:function t(e,n,o){if(e&&"object"==typeof e){Object.defineProperty(e,"_observeProps",{enumerable:!1,value:{}});var i=function(i){var a=e._observeProps[i]=e[i],r=typeof a,c=o?o+"."+i:i;Object.defineProperty(e,i,{set:function(e){var o=typeof e;if(o!==r)throw new Error("observer\uff1a\u4e0d\u80fd\u66f4\u6539\u76d1\u542c\u6570\u636e\u7684\u503c\u7c7b\u578b "+r+" -> "+o);"number"===r?e<=Number.MAX_VALUE?this._observeProps[i]=e:(cc.error(">> Number\u6ea2\u51fa\uff01key = "+i),this._observeProps[i]=Number.MAX_VALUE):this._observeProps[i]=e,t(e,n,c),n(c,e)},get:function(){return this._observeProps[i]}}),"object"===r&&t(a,n,c)};for(var a in e)i(a)}}},cc._RF.pop()},{}],"physics-bound":[function(t,e){"use strict";cc._RF.push(e,"8bb59G9YJZM663ZrZZZSww8","physics-bound"),cc.Class({extends:cc.Component,properties:{size:cc.size(0,0),score:cc.Node,fadeRank:cc.Node,mouseJoint:!0},onLoad:function(){var t=this.size.width||this.node.width,e=(this.size.height||this.node.height,new cc.Node);e.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this.mouseJoint&&(e.addComponent(cc.MouseJoint).mouseRegion=this.node);var n=this.score.parent.convertToWorldSpaceAR(cc.v2(this.score.x,this.score.y)).y,o=this.fadeRank.parent.convertToNodeSpaceAR(cc.v2(this.fadeRank.x,this.fadeRank.y)).y;this._addBound(e,360,n,t,20),this._addBound(e,360,o,t,20),this._addBound(e,360-t/2,(n-o)/2+o,20,n-o),this._addBound(e,360+t/2,(n-o)/2+o,20,n-o),e.parent=this.node},_addBound:function(t,e,n,o,i){var a=t.addComponent(cc.PhysicsBoxCollider);a.offset.x=e,a.offset.y=n,a.size.width=o,a.size.height=i,a.friction=0,a.restitution=1}}),cc._RF.pop()},{}],rankCell:[function(t,e){"use strict";cc._RF.push(e,"5be83BEQl9IaKYYqhl/t1t8","rankCell"),cc.Class({extends:cc.Component,properties:{crown:[cc.SpriteFrame],rankTxt:cc.Label,rankIma:cc.Sprite,groupName:cc.Label,score:cc.Label},onLoad:function(){this.cb=null,this.groupid=null,this.node.on("click",function(){this.cb&&this.cb(this.groupid)},this)},init:function(t,e,n){this.groupid=t._id,this.cb=n,this.rankIma.node.active=e<3,e<3&&(this.rankIma.spriteFrame=this.crown[e])}}),cc._RF.pop()},{}],rankTopCell:[function(t,e){"use strict";cc._RF.push(e,"a2537cnriVMkIU4KIqr3yCg","rankTopCell");var n=t("tool");cc.Class({extends:cc.Component,properties:{topGroupHead:cc.Prefab,groupMembers:cc.Node,groupName:cc.Label,groupScore:cc.Label,topHead:cc.Sprite,topName:cc.Label,topScore:cc.Label},onLoad:function(){this.headList=[];var t=17;this.headPos={1:[{x:0,y:0}],2:[{x:-t,y:0},{x:t,y:0}],3:[{x:0,y:t},{x:-t,y:-t},{x:t,y:-t}],4:[{x:-t,y:t},{x:t,y:t},{x:-t,y:-t},{x:t,y:-t}],5:[{x:-t,y:t},{x:t,y:t},{x:-34,y:-t},{x:0,y:-t},{x:34,y:-t}],6:[{x:-34,y:t},{x:0,y:t},{x:34,y:t},{x:-34,y:-t},{x:0,y:-t},{x:34,y:-t}],7:[{x:0,y:34},{x:-34,y:0},{x:0,y:0},{x:34,y:0},{x:-34,y:-34},{x:0,y:-34},{x:34,y:-34}],8:[{x:-t,y:34},{x:t,y:34},{x:-34,y:0},{x:0,y:0},{x:34,y:0},{x:-34,y:-34},{x:0,y:-34},{x:34,y:-34}],9:[{x:-34,y:34},{x:0,y:34},{x:34,y:34},{x:-34,y:0},{x:0,y:0},{x:34,y:0},{x:-34,y:-34},{x:0,y:-34},{x:34,y:-34}]};for(var e=1;e<=9;e++){var n=1/3-.01,o=1;1===e?(n=1.01,o=3):e>=2&&e<=4&&(n=.49,o=1.5);for(var i=0;i<this.headPos[e].length;i++)this.headPos[e][i].scale=n,this.headPos[e][i].posScale=o}},init:function(t,e){this.headList.map(function(t){return t.active=!1}),this.groupName.string=n.tool.trimString(e.name,8),this.groupScore.string=e.score;for(var o=t.length,i=0;i<o&&i<9;i++){var a=null;void 0===this.headList[i]?(a=cc.instantiate(this.topGroupHead),this.headList.push(a),a.parent=this.groupMembers):a=this.headList[i],a.active=!0}o=o>9?9:o;for(var r=this.headPos[o],c=0;c<o;c++)this.headList[c]&&(this.headList[c].x=r[c].x*r[c].posScale,this.headList[c].y=r[c].y*r[c].posScale,this.headList[c].scale=r[c].scale);t.sort(function(t,e){return void 0===e.score?-1:void 0===t.score?1:e.score-t.score}),this.topName.string=n.tool.trimString(t[0].nickname,8),this.topScore.string=t[0].score}}),cc._RF.pop()},{tool:"tool"}],rest:[function(t,e){"use strict";cc._RF.push(e,"dd2552IdC1FF7qW93ka+81k","rest");var n=t("store").global;cc.Class({extends:cc.Component,properties:{timeTxt:{default:null,type:cc.Label}},onLoad:function(){this.gaming=cc.find("Canvas/gaming").getComponent("gaming")},onEnable:function(){this.timer=10,this.schedule(this.updateTimeTxt,1),this.updateTimeTxt()},onVideoAdBtn:function(){this.unschedule(this.updateTimeTxt)},updateTimeTxt:function(){this.timer>=0&&(this.timeTxt.string="\u8fd8\u6709"+Math.floor(this.timer)+"\u79d2",this.timer-=1,this.timer<0&&this.getAward())},getAward:function(){this.unschedule(this.updateTimeTxt),this.close(),this.gaming.showBubbles(!0),n.bubbleCntForRest=0,n.dstBubbleCntForRest=100},show:function(){this.node.active=!0},close:function(){this.node.active=!1}}),cc._RF.pop()},{store:"store"}],store:[function(t,e){"use strict";cc._RF.push(e,"aa2df0C+LtJcI6QvCk1WE7k","store");var n=t("debounce"),o=t("globalData"),i=t("api"),a=i.getUserInfo,r=i.updateScore,c=i.scoreQueneRunner,s=n(function(){h().then(function(){cc.sys.localStorage.setItem("u:"+o.uid+":global",JSON.stringify(o)),c(function(){return r(o.score)})})},1e3);function l(){return a().then(function(t){var e={user:{tg_id:0,score:0,tg_first_name:"",tg_last_name:"",tg_username:"",wallet:""},dailyScore:o.bubbleCntForRest,dailyScoreLimit:o.dstBubbleCntForRest},n=t||e,i=n.user,a=n.dailyScore,r=n.dailyScoreLimit,c=cc.sys.localStorage.getItem("u:"+i.tg_id+":global");c&&(Object.assign(o,JSON.parse(c)),o.colorBubbleCntArr_id instanceof Array||d("colorBubbleCntArr_id"),o.colorBubbleCntArr_cnt instanceof Array||d("colorBubbleCntArr_cnt"),o.colorBubbleCntArr=[]),t&&(o.uid=i.tg_id,o.totalScore=i.score,o.score=a,o.nickname=i.tg_first_name+" "+i.tg_last_name,o.username=i.tg_username,o.bubbleCntForRest=a,o.dstBubbleCntForRest=r,o.wallet=i.wallet||"",o.remainTimeToNextDay=t.remainTimeToNextDay||864e5)})}var u,h=function(){return u||(u=l()),u};function d(t){var e=[];if(console.log(t+" before: ",o[t]),o[t]instanceof Object)for(var n in o[t])e.push(o[t][n]);o[t]=e,console.log(t+" after: ",o[t])}var p={global:o,save:s,sync:l,ready:h};e.exports=p,cc._RF.pop()},{api:"api",debounce:"debounce",globalData:"globalData"}],switch:[function(t,e){"use strict";cc._RF.push(e,"68957mHMBFO14x9W1EKA82a","switch"),cc.Class({extends:cc.Component,properties:{btn:{default:null,type:cc.Node},onNode:{default:null,type:cc.Node},offNode:{default:null,type:cc.Node}},onLoad:function(){this.node.on("click",function(){this.isOn=!this.isOn,this.isOn?(this.on(),this.node.emit("switch",{isOn:this.isOn})):(this.off(),this.node.emit("switch",{isOn:this.isOn}))},this)},on:function(){this.isOn=!0,this.onNode.active=!0,this.offNode.active=!1,this.btn.runAction(cc.moveTo(.1,18,-1))},setOn:function(){this.isOn=!0,this.onNode.active=!0,this.offNode.active=!1,this.btn.x=18,this.btn.y=-1},off:function(){this.isOn=!1,this.onNode.active=!1,this.offNode.active=!0,this.btn.runAction(cc.moveTo(.1,-18,-1))},start:function(){}}),cc._RF.pop()},{}],throttle:[function(t,e){"use strict";cc._RF.push(e,"c0725IZ4tFCmJbG6AlnEoOc","throttle"),e.exports=function(t,e){var n,o,i,a=[];return function(){o=this,i=arguments,n||(n=setTimeout(function(){for(var e=0,r=i.length;e<r;e++)a.push(i[e]);t.apply(o,a),a=[],n=null},e))}},cc._RF.pop()},{}],tool:[function(t,e,n){"use strict";cc._RF.push(e,"09d6284LdVKaaYJ/ubJ9J1X","tool"),n.__esModule=!0,n.tool=void 0;var o,i,a,r,c,s,l={};n.tool=l,l.getTodayEndTime=function(){var t=new Date,e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate(),n=new Date(new Date(e).getTime()+864e5-1).getTime();return null===n?0:n},o=/[^\x00-\xff]/g,l.sizeof=function(t){return t.replace(o,"ci").length},a=0,r="",c=0,s=0,l.cutString=function(t,e){for(a=0,r="",c=0,s=t.length;c<s&&(i=t.charCodeAt(c),!((a+=i<=127?1:2)>e));c++)r+=t.substr(c,1);return r},l.trimString=function(t,e){return void 0===t&&(t=""),this.sizeof(t)>2*e?this.cutString(t,2*e-1)+"...":t},l.toFixed=function(t,e){return parseFloat(t.toFixed(e))},l.toFixedStr=function(t,e){return Number.parseFloat(t).toFixed(e)},l.formatNum=function(t,e){return void 0===e&&(e=3),"number"!=typeof t||Number.isNaN(t)?(cc.error(t+" is not number!!!"),""):t>=1e5?this.toFixed(t/1e4,e)+"\u4e07":t},cc._RF.pop()},{}],top:[function(t,e){"use strict";cc._RF.push(e,"99a6aRNC/BFNbeqoQDaLRb1","top");var n=t("../../../prefebs/dialog/DialogManager");cc.Class({extends:cc.Component,properties:{avatar:cc.Node,usename:cc.Label,faq:cc.Node},onLoad:function(){this.avatar.on("click",function(){n.DialogManager.getInstance().show("dialogGroup")}),this.faq.on("click",function(){n.DialogManager.getInstance().show("dialogFaq")})}}),cc._RF.pop()},{"../../../prefebs/dialog/DialogManager":"DialogManager"}],"use_v2.0.x_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"30709B7asZA1r+hKhLGY+Dp","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["config","baseDialog","dialogFaq","dialogGroup","dialogRank","dialogTips","modal","AcrossTips","bg","countUpLabel","globalRank","index","rankTopCell","rest","switch","top","bubbles","explodes","OrderManager","ISingleton","SFXStars","ajax","api","debounce","globalData","observer","store","throttle","gaming","physics-bound","tool","use_v2.0.x_cc.Toggle_event","bubble","DialogBase","DialogManager","explode","globalCell","rankCell"]);